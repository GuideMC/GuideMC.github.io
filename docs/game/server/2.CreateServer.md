# 创建服务器

搭建自己的 Minecraft 服务器意味着你拥有对这个世界的完全控制权：你可以自定义游戏规则、安装插件或 Mod、邀请你的朋友，并且 7x24 小时随时可以进入。

## 选择并下载服务器核心

关于服务器核心的选择请参考[服务端核心大全](./1.SelectCore.md)，这里介绍了几乎所有的服务器核心。

::: danger 注意
一些混合端核心在下载的同时也需要手动下载对应的 `libraries` 运行库并解压至服务端根目录，如未下载则无法正常启动
:::

## 配置与启动服务器

::: danger 警告
不要把这个文件夹放在C盘或桌面！文件夹路径不要含有中文！
:::

首先你需要创建一个用于放置你服务器的文件夹，然后下载你选择的核心文件并放入其中。  
这就是你的服务端根目录，之后所有操作都在这里进行。  
为了控制服务器，你需要创建一个启动脚本，而不是直接双击 `.jar` 文件。

**对于 Windows 用户 (.bat 脚本):**

1. 在服务端根目录中，右键 -> 新建 -> 文本文档并重命名为 `start.bat`。
2. 右键点击 `start.bat`，选择“编辑”并输入以下内容，通过双击运行：

```batch
@echo OFF
java -Xms2G -Xmx4G -jar server.jar nogui
pause
```

**对于 macOS / Linux 用户 (.sh 脚本):**

1. 创建一个名为 `start.sh` 的文件，并在终端中给它执行权限：`chmod +x start.sh`。
2. 输入以下内容并通过 `./start.sh` 运行：

```sh
#!/bin/sh
java -Xms2G -Xmx4G -jar server.jar nogui
```

::: tip 参数解释
`-Xms2G`: 设置服务器启动时占用的 **最小内存** 为 2GB。  
`-Xmx4G`: 设置服务器运行时占用的 **最大内存** 为 4GB。**请根据你的电脑配置修改这两个值。**。  
`-jar server.jar`: 指定要运行的服务器核心文件。**请确保这个文件名和你下载的完全一致！**  
`nogui`: 不显示 Minecraft 服务器的图形化界面，推荐使用，避免显示两个窗口。
:::

自 1.8 起，你需要同意 [Minecraft 的最终用户许可协议 (EULA)](https://account.mojang.com/documents/minecraft_eula)才能开启服务器。  
请打开 `eula.txt`，然后将其中的 `false` 修改为 `true`，然后重新启动服务器。此时服务器才会正常运行。  
当看到类似 `Done (...)! For help, type "help"` 的信息时，就代表你成功开启了你的服务器。  

::: tip 我该如何关闭服务器？
在控制台窗口中输入 `stop` 并回车，服务器会保存好数据然后安全关闭。**请不要直接点 X 关闭窗口！**
:::

## 为服务器添加插件 (Plugins)

本部分适用于使用 **PaperMC**、**Spigot** 等核心的服务器。如果你不确定，你的服务器文件夹里应该有一个 `plugins` 文件夹。  
**作用于服务端**：插件只安装在服务器上，玩家连接服务器时**不需要**安装任何东西。  
**功能**：主要用于增强服务器的管理和玩法功能，例如领地保护、经济系统、小游戏、权限管理等。它们**通常不会添加新的方块、物品或生物**。  
**服务器类型**：需要特定的服务器核心，如 **Spigot**、**PaperMC**、Purpur 等（这些都是基于官方服务端修改的版本）。**原版（Vanilla）服务器无法安装插件**。  
**优点**：对玩家友好，方便管理。

### 寻找并下载插件

最常用的插件下载网站是：[SpigotMC Resources](https://www.spigotmc.org/resources/)、[CurseForge (Bukkit Plugins)](https://www.curseforge.com/minecraft/bukkit-plugins) 和 [Modrinth (Plugins)](https://modrinth.com/plugins)

**下载时请注意：**  
**插件兼容的 Minecraft 版本**：确保插件支持你的服务器版本。  
**前置插件 (Dependencies)**：一些插件需要其他插件作为前置才能运行，通常在插件介绍页面会有说明，记得一并下载。

### 安装插件

1. **停止你的服务器！** 这是非常重要的一步，不要在服务器运行时修改文件。
2. 打开你的服务器根目录，找到一个名为 `plugins` 的文件夹。如果没有，请先运行一次服务器，它会自动生成。
3. 将你下载好的插件 `.jar` 文件拖拽或复制到这个 `plugins` 文件夹里。
4. **启动你的服务器**。

### 配置插件

1. 当服务器启动时，它会加载 `plugins` 文件夹里的所有插件。如果插件需要配置文件，它会自动在 `plugins` 文件夹内创建一个以该插件命名的文件夹。
2. 例如，`EssentialsX` 会创建一个名为 `Essentials` 的文件夹。
3. 进入这个新生成的文件夹，你会看到一些配置文件，最常见的叫 `config.yml`。
4. **再次停止服务器**（或者在游戏中输入 `/essentials reload`，但对于大型修改，重启更安全）。
5. 使用文本编辑器（推荐 **Notepad++** 或 **Visual Studio Code**，不要用 Windows 自带的记事本，可能会破坏格式）打开 `config.yml` 文件。
6. 根据文件里的注释和说明，修改你想要的设置。
7. 保存文件，然后**重新启动服务器**使配置生效。

## 为服务器添加模组 (Mods)

本部分适用于使用 **Forge** 或 **Fabric** 模组加载器的服务器。  
**作用于服务端和客户端**：模组需要同时安装在**服务器**和**所有要加入的玩家的游戏客户端**上。服务器和客户端的模组列表必须**完全一致**。  
**功能**：可以从根本上改变游戏内容，例如添加新的维度、魔法系统、工业机器、新的生物和物品。  
**服务器类型**：需要特定的模组加载器，如 **Forge**、**Fabric** 或 **NeoForge**。  
**优点**：可以极大地丰富游戏内容，创造全新的玩法。

### 寻找并下载模组

首先下载模组加载器安装文件：[Forge](https://files.minecraftforge.net/net/minecraftforge/forge/) 或 [Fabric](https://fabricmc.net/use/server/)
**安装 Forge 服务器**:  
运行下载的 Forge 安装器 `.jar` 文件。  
选择 "Install server"，并指定一个**空的**服务器文件夹路径。  
点击 "OK" 开始安装。安装完成后，文件夹里会出现 `forge-xxxx.jar` 和一些其他文件。  
**安装 Fabric 服务器**:  
按照官网指引，下载 `fabric-server-launch.jar`。  
把它放到一个空的服务器文件夹里，然后运行它来生成所需文件。

### 安装模组

1. **停止服务器/关闭游戏**。
2. **服务器端**：在你的 Forge/Fabric 服务器根目录中，找到 `mods` 文件夹（如果没有就手动创建一个）。
3. **客户端**：  
在 Windows 上，按 `Win + R`，输入 `%appdata%\.minecraft` 并回车，打开你的游戏根目录。  
在 macOS 上，路径是 `~/Library/Application Support/minecraft`。  
在你的游戏根目录里，找到 `mods` 文件夹（如果没有就手动创建一个）。
4. 将所有下载的模组 `.jar` 文件（包括前置模组）**同时复制**到服务器的 `mods` 文件夹和**所有玩家**的客户端 `mods` 文件夹中。

### 配置模组

1. **启动服务器**。第一次加载新模组可能会比较慢，因为它需要生成配置文件。
2. **玩家启动游戏**：在 Minecraft 启动器中，选择你之前安装的 Forge 或 Fabric 版本，然后启动游戏。
3. 如果一切顺利，服务器会正常启动，玩家也能成功加入游戏并体验到新模组的内容。
4. **配置模组**：  
模组的配置文件通常在服务器根目录的 `config` 文件夹中。  
和插件一样，停止服务器，用文本编辑器修改配置文件，然后重启服务器以应用更改。

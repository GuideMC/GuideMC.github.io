# 崩溃报告分析

本节是本文档最核心也是最重要的内容——分析崩溃报告。  
当你在游玩 Minecraft 时遇到游戏崩溃或无响应时，可以参考本节内容尝试解决问题。  
本章内容仅对崩溃报告做简要分析，可参考以下流程进行处理，详细信息请参考本节其它内容。

## 游戏崩溃或闪退 (Game Crash / Flicker)

这是最常见也最复杂的一类问题。当您的游戏在启动或运行过程中突然关闭时，请遵循以下步骤。

### 收集关键的崩溃信息

首先，我们需要获取记录了错误原因的日志文件。

A：**启动器捕获了问题**

**现象：** 游戏崩溃后，启动器或游戏内弹出一个友好的提示窗口（通常由 `Not Enough Crashes` 或 `LoliASM` 等模组提供）。  
**操作：** 点击提示窗口上的“导出”或“查看”按钮，直接获取**崩溃信息 (Crash Information)**。  
**专家建议：** 为了获取最原始的崩溃报告，有时可以暂时禁用这类崩溃处理模组，然后让游戏再次崩溃，以便获得更底层的错误信息。

B：**启动器未捕获问题**

**现象：** 游戏窗口直接消失，启动器无任何反应。  
**操作：** 手动进入您的游戏文件夹，找到并收集以下文件：  
    `.minecraft/crash-reports/` 文件夹下的最新 `.txt` 文件。  
    `.minecraft/logs/` 文件夹下的 `latest.log` 文件。

### 分析日志，判断崩溃类型

打开您获取的崩溃报告或日志文件，仔细阅读其中的内容。根据错误信息，我们可以将问题归为以下几类：

A：**模组冲突 (Mod Conflict)**

**日志特征：** 报告中出现 `MixinConflictException` 或类似的关键词，通常会列出两个或多个模组的名称。  
**深入分析：** 找到日志中提到的冲突 `class` 文件，确认是哪几个模组（例如 `${modid1}` 和 `${modid2}`）修改了同一个东西。  
**解决方案：**
    1. 禁用其中一个冲突的模组。
    2. 查找这些模组是否有兼容版本或兼容补丁。
**专家建议：** 如果遇到 `Feature Order Cycle` 这种罕见的加载顺序冲突，可以使用 `Cyanide` 模组来输出更详细的诊断信息。

B：**模组自身报错 (Mod Error)**

**日志特征：** 错误追踪（Stack Trace）的顶端明确指向了某一个模组的内部代码。  
**解决方案：**
    1. 禁用或删除报错的 `${modid}` 模组。
    2. 检查该模组是否有新版本并尝试更新。
**专家建议：** 一个非常具体的例子是，如果 `Sodium` 模组导致与 `Fabric API` 相关的错误，安装 `Indium` 模组通常可以解决兼容性问题。

C：**模组版本不匹配 (Mod Version Mismatch)**

**日志特征：** 日志中明确提示模组之间或模组与游戏本体之间存在版本不兼容。  
**解决方案：** 仔细检查并更换 `${modid1}` 和 `${modid2}` 的版本，确保它们相互兼容，并与您的游戏版本（如 Forge/Fabric 版本）匹配。

D：**Java 版本错误 (Java Version Error)**

**日志特征：** 报告中出现 `UnsupportedClassVersionError` 或直接提示 Java 版本过低/过高。  
**解决方案：** **更换正确的 Java 版本**。请根据您的游戏版本和模组包要求，安装并配置推荐的 Java 版本（如 Java 8, 11, 17 等）。

E：**Java 虚拟机 (JVM) 崩溃**

**日志特征：** 出现 `OutOfMemoryError` (内存不足)、`ConcurrentModificationException` (并发修改异常) 等底层错误。  
**深入分析：** 这类问题较为底层，有时需要开发者使用如 `CMESuckMyDuck` 等高级工具进行监视。  
**解决方案：** 最常见的原因是**虚拟机内存不足**。请在启动器中调高分配给游戏的内存（RAM），例如从 2GB 增加到 4GB 或更高。

F：**疑似外部或硬件问题**

**日志特征：** 游戏日志非常“干净”，没有任何明显的错误信息，但游戏依然崩溃。  
**深入分析：**  
    1. 打开您操作系统的**事件查看器 (Event Viewer)**。
    2. 在事件查看器中，如果看到与 `javaw.exe` 或游戏相关的错误，请分析其内容：  
        如果错误是 **“应用挂起 (Application Hang)”**，说明游戏变成了无响应状态，请参考下方进行处理。  
        如果错误是 **“Java 应用错误 (Java Application Error)”**，请查看错误的模块和调用栈：  
            **错误模块是显卡驱动** (如 `nvwgf2umx.dll`, `amdxx.dll`) → **解决方案：升级显卡驱动**。  
            **错误发生在 C2 编译器线程** → **解决方案：暂时禁用 C2 编译器** (通过在启动器中添加 JVM 参数 `-XX:DisableC2Compiler`)。  
            **无明显规律，但您对设备进行了超频** → **解决方案：关闭超频软件或降压后重启**。  
            **以上都不是** → **解决方案：用户需自行排查设备硬件问题**（如内存条、硬盘等）。

## 游戏未响应 (Game Freezes / Not Responding)

当您的游戏画面卡住，程序显示“未响应”但没有立即关闭时，请遵循此流程。

## 获取运行栈信息

使用专业工具 `jstack`，或更简单地，在部分启动器（如 HMCL）的“查看日志”或“游戏进程管理”功能中，**导出游戏当前的运行栈（线程堆栈）**。这份文件记录了游戏在卡死瞬间所有线程正在做什么。

## 分析判断卡死原因

A：**死锁 (Deadlock)**  
    **栈特征：** 能看到多个模组的线程在相互等待对方释放资源，形成闭环。  
    **解决方案：** 找到导致死锁的核心模组 `${modid}`，它很可能**卡住了**。禁用或更新它。

B：**主线程被占用 (Main Thread Hogged)**  
    **栈特征：** 看到主线程 (Main Thread) 被某个模组的操作卡住了超过10秒。  
    **解决方案：** 同样地，找到占用线程的 `${modid}` 模组，它**卡住了**。禁用或更新它。

C：**连接超时 (Connection Timeout)**  
    **栈特征：** 线程卡在网络请求相关的操作上。  
    **解决方案：** **使用网络代理或更换您的网络环境**（如切换 Wi-Fi、使用有线网络等）。

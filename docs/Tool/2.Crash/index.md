# 崩溃报告分析

本章旨在帮助您分析并解决在游玩 Minecraft 过程中遇到的游戏崩溃、无响应等问题。  
当您遭遇异常时，请首先参考以下流程进行排查，详细信息请参考本节其它内容。

## 游戏崩溃或意外退出 (Game Crash / Unexpected Exit)

这是最常见也最复杂的一类问题。当游戏在启动或运行过程中突然关闭时，请遵循以下步骤。

### 收集关键崩溃信息

首先，我们需要获取记录了错误原因的日志文件。

A：**启动器或游戏内模块已捕获问题**

**现象：** 游戏崩溃后，启动器或游戏界面弹出一个提示窗口（通常由 `Not Enough Crashes` 或 `LoliASM` 等模组提供）。  
**操作：** 点击提示窗口上的“导出”或“查看”按钮，直接获取完整的**崩溃报告 (Crash Report)**。  
💡 **专家建议：** 为获取最原始的崩溃报告，有时可暂时禁用这类崩溃处理模组，让游戏再次崩溃以生成更底层的错误日志。

B：**游戏直接消失，启动器无响应**

**现象：** 游戏窗口凭空消失，启动器没有任何提示或反应。  
**操作：** 手动进入游戏文件夹，找到并收集以下文件：  
    最新生成的 `.txt` 文件：位于 `.minecraft/crash-reports/` 目录下。  
    最新的日志文件：即 `.minecraft/logs/` 目录下的 `latest.log`。

### 分析日志，定位崩溃原因

打开您获取的崩溃报告或 `latest.log` 文件，根据其中的错误信息，可将问题归为以下几类：

A. **模组冲突 (Mod Conflict)**

**日志特征：** 报告中包含 `MixinConflictException` 或类似关键词，通常会明确列出两个或多个冲突的模组 ID（如 `${modid1}` 和 `${modid2}`）。  
**深入分析：** 找到日志中提到的冲突 `class` 文件，确认是哪几个模组修改了同一个游戏元素。  
**解决方案：**
    1. 尝试禁用其中一个冲突的模组。
    2. 查找这些模组是否有新的兼容版本或官方/社区提供的兼容补丁。
💡 **专家建议：** 若遇到罕见的 `Feature Order Cycle`（加载顺序循环冲突），可使用 `Cyanide` 模组来输出更详细的诊断信息。

B. **模组自身错误 (Mod Error)**

**日志特征：** 错误追踪（Stack Trace）的顶端明确指向了某一个特定模组（`${modid}`）的内部代码。  
**解决方案：**
    1. 禁用或删除引发错误的 `${modid}` 模组。
    2. 前往该模组发布页，检查是否有修复该问题的新版本并尝试更新。
💡 **专家建议：** 一个典型案例是，若 `Sodium` 模组因与 `Fabric API` 的兼容性问题报错，安装 `Indium` 模组通常可以解决。

C. **模组版本不匹配 (Mod Version Mismatch)**

**日志特征：** 日志中明确提示模组之间或模组与游戏本体（如 Forge/Fabric 加载器）存在版本不兼容。  
**解决方案：** 仔细核对并更换 `${modid1}` 和 `${modid2}` 的版本，确保它们相互兼容，并与您的游戏版本及模组加载器版本匹配。

D. **Java 版本错误 (Java Version Error)**

**日志特征：** 报告中出现 `UnsupportedClassVersionError`，或直接提示当前 Java 版本过低/过高。  
**解决方案：** **更换正确的 Java 版本**。根据您的 Minecraft 版本和整合包要求，安装并配置推荐的 Java 版本（如 Java 8, 11, 17 等）。

E. **Java 虚拟机 (JVM) 崩溃**

**日志特征：** 报告中出现底层错误，如 `OutOfMemoryError` (内存不足) 或 `ConcurrentModificationException` (并发修改异常)。  
**解决方案：**  
    最常见的原因是**分配给游戏的内存不足**。请在启动器设置中调高分配的内存（RAM），例如从 2GB 增加到 4GB 或更高。  
    对于更复杂的底层问题（如并发修改），开发者可能需要使用如 `CMESuckMyDuck` 等高级工具进行监控排查。

F. **疑似外部或硬件问题**

**日志特征：** 游戏日志非常“干净”，没有记录任何明显的错误信息，但游戏依然崩溃。  
**深入排查：**
    1. 打开操作系统的**事件查看器 (Event Viewer)**。
    2. 在事件查看器中，查找与 `javaw.exe` 相关的错误日志并分析其内容：  
        **应用挂起 (Application Hang):** 说明游戏进入无响应状态。请参考下文“游戏未响应”部分的处理方法。  
        **应用错误 (Application Error):** 查看错误的详细信息，特别是错误模块和调用栈：  
            **错误模块为显卡驱动** (如 `nvwgf2umx.dll`, `amdxx.dll`) → **解决方案：** 更新或重新安装您的显卡驱动。  
            **错误发生在 C2 编译器线程** → **解决方案：** 尝试在启动器中添加 JVM 参数 `-XX:DisableC2Compiler` 来禁用 C2 编译器。  
            **无明显规律，但您对设备进行了超频** → **解决方案：** 关闭所有超频软件，或将 CPU/GPU/内存频率和电压恢复至默认值后重启。  
            **以上均不符合** → **解决方案：** 问题可能源于硬件故障，用户需自行排查硬件问题（如内存条、硬盘、电源等）。

## 游戏未响应或卡死 (Game Freezes / Not Responding)

当游戏画面卡住，程序显示“未响应”但并未立即关闭时，请按以下流程操作。

### 获取线程堆栈信息 (Thread Dump)

使用专业工具 `jstack`，或通过部分启动器（如 HMCL）提供的“查看日志”或“游戏进程管理”功能，**导出游戏卡死瞬间的线程堆栈 (Thread Dump)**。这份文件记录了所有线程当时正在执行的任务。

### 分析堆栈，判断卡死原因

A. **死锁 (Deadlock)**

**堆栈特征：** 可以看到多个模组的线程在相互等待对方释放资源，形成了一个无法解开的闭环。  
**解决方案：** 找到导致死锁的核心模组 `${modid}`，它很可能是问题的根源。禁用或更新该模组。

B. **主线程被长时间占用 (Main Thread Hogged)**

**堆栈特征：** 游戏的主线程 (`Main Thread`) 被某个模组的单一操作卡住，持续时间超过10秒。  
**解决方案：** 定位到长时间占用主线程的模组 `${modid}`，该模组是导致卡顿的根源。禁用或更新它。

C. **连接超时 (Connection Timeout)**

**堆栈特征：** 线程卡在与网络请求相关的操作上。  
**解决方案：** **优化您的网络环境**。尝试使用网络代理、加速器，或切换网络连接（如从 Wi-Fi 换为有线网络）。
